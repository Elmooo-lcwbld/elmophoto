<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Elmooo</title>
    <script>

function list_click() {
            var inputs = document.getElementsByTagName("a");
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].id != "") {
                    if (inputs[i].id == "home") {
                        var href = document.getElementById("home");
                        href.href = "../Elmooo/Default.html";
                    }
                    else if (inputs[i].id == "about") {
                        var href = document.getElementById("about");
                        href.href = "../Elmooo/About.html";
                    }
                    else if (inputs[i].id == "works") {
                        var href = document.getElementById("works");
                        href.href = "../Elmooo/Works.html";
                    }
                }
            }
        }

        window.onload = function () {
            function ferrari() {
                var divimg = document.getElementById("work_1img");
                var li_imgCount = 14;
                var cp_keynum = "key_num";
                var str = localStorage.getItem(cp_keynum);
                var num = JSON.parse(str);
                var ls_inner = "";
                for (var li_img = 1; li_img <= li_imgCount; li_img++) {
                    ls_inner += "<img ID='"+li_img+"' onload=imgonload() src='images/" + num.cp_num_value + "/" + num.cp_num_value + " (" + li_img + ").jpg'>";
                    
                    const img = document.getElementsByClassName('worksimg img');
                    img.onerror = function () {
                        URL.revokeObjectURL(this.src);
                        console.log('TT');};
                }

                divimg.innerHTML = ls_inner;
            };
            ferrari();
        }

        function imgonload() {
            const img = document.getElementsByClassName('worksimg img');
            const MAX_WIDTH = 320;
                    const MAX_HEIGHT = 180;

                        URL.revokeObjectURL(this.src);
                        const [newWidth, newHeight] = calculateSize(
                            img,
                            MAX_WIDTH,
                            MAX_HEIGHT
                        );
                        const canvas = document.createElement('canvas');
                        canvas.width = newWidth;
                        canvas.height = newHeight;
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, newWidth, newHeight);
                        canvas.toBlob(
                            (blob) => {
                            },
                            MIME_TYPE,
                            QUALITY
                        );
                        document.getElementById('work_1img').append(canvas);
                    };

        function calculateSize(img, maxWidth, maxHeight) {
            let width = img.width;
            let height = img.height;

            // calculate the width and height, constraining the proportions
            if (width > height) {
                if (width > maxWidth) {
                    height = Math.round((height * maxWidth) / width);
                    width = maxWidth;
                }
            }
            else {
                if (height > maxHeight) {
                    width = Math.round((width * maxHeight) / height);
                    height = maxHeight;
                }
            }
            return [width, height];
        }

    </script>
    <link href="css/SiteStyle.css" rel="stylesheet" />

</head>
<body>
    <header>
        <button class="menu">&#9776;</button>
            <nav class="contact">
                <ul>
                    <li>
                        <a runat="server" href="https://www.facebook.com/profile.php?id=100095285242803" height="22px">
                            <img src="images/facebook.svg" alt="facebook" height="22px" >
                        </a>
                    </li>
                    <li>
                        <a runat="server" href="https://www.instagram.com/elmooo_lcwbld/" height="22px">
                            <img src="images/instagram.svg" alt="instagram" height="22px">
                        </a>
                    </li>
                    <li>
                        <a runat="server" href="mailto:lcwbld@gmail.com" height="22px">
                            <img src="images/envelope-solid.svg" alt="email" height="22px">
                        </a>
                    </li>
                    <li>contact me</li>
                </ul>
            </nav>
        <h1>Elmo</h1>
        <nav>
            <ul>
                <li><a id="home" runat="server" href="#" onclick="list_click()">首頁</a></li>
                <li><a id="about" runat="server" href="#" onclick="list_click()">關於</a></li>
                <li><a id="works" runat="server" href="#" onclick="list_click()">作品</a></li>
                <li><a runat="server" href="#">想拍的</a></li>
                <li><a runat="server" href="#">我有的衣服</a></li>
            </ul>
        </nav>
        <hr class="hr1" width="50%">
    </header>
    <div class="body-content">
        
        <main aria-labelledby="title">
            <div id="work_1img" class="worksimg" style="padding: 2% 13% 2% 13%;">
            </div>
        </main>
        
        <footer>
            <p>&copy; 2023 - Elmooo</p>
        </footer>
    </div>

</body>
</html>